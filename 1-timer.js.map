{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\n\nclass Timer {\n  constructor({\n    startButtonSelector,\n    datePickerSelector,\n    timeElementsSelectors,\n  }) {\n    this.startButton = document.querySelector(startButtonSelector);\n    this.datePickerElement = document.querySelector(datePickerSelector);\n    this.timeElements = {\n      days: document.querySelector(timeElementsSelectors.days),\n      hours: document.querySelector(timeElementsSelectors.hours),\n      minutes: document.querySelector(timeElementsSelectors.minutes),\n      seconds: document.querySelector(timeElementsSelectors.seconds),\n    };\n\n    this.userSelectedDate = 0;\n    this.timerInterval = null;\n\n    this.iziToastErrorOptions = {\n      title: 'Error',\n      message: 'Please choose a date in the future!',\n      position: 'topCenter',\n    };\n\n    this.flatpickrOptions = {\n      enableTime: true,\n      time_24hr: true,\n      defaultDate: new Date(),\n      minuteIncrement: 1,\n      onClose: selectedDates => this.onCloseHandler(selectedDates),\n    };\n\n    flatpickr(this.datePickerElement, this.flatpickrOptions);\n    this.initEventListeners();\n  }\n\n  initEventListeners() {\n    this.startButton.addEventListener('click', () =>\n      this.startTimer(this.userSelectedDate)\n    );\n  }\n\n  convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    return {\n      days: Math.floor(ms / day),\n      hours: Math.floor((ms % day) / hour),\n      minutes: Math.floor(((ms % day) % hour) / minute),\n      seconds: Math.floor((((ms % day) % hour) % minute) / second),\n    };\n  }\n\n  renderTime(timeData) {\n    const timeDifference = timeData - Date.now();\n    const convertedTimeDifference = this.convertMs(timeDifference);\n\n    if (timeDifference > 0) {\n      for (const key in convertedTimeDifference) {\n        this.timeElements[key].innerHTML = convertedTimeDifference[key]\n          .toString()\n          .padStart(2, '0');\n      }\n    } else {\n      this.stopTimer();\n    }\n  }\n\n  startTimer(selectedDate) {\n    this.startButton.disabled = true;\n    this.datePickerElement.disabled = true;\n\n    this.timerInterval = setInterval(() => {\n      this.renderTime(selectedDate);\n    }, 1000);\n  }\n\n  stopTimer() {\n    if (this.timerInterval) {\n      clearInterval(this.timerInterval);\n      this.timerInterval = null;\n    }\n\n    for (const key in this.timeElements) {\n      this.timeElements[key].innerHTML = '00';\n    }\n\n    this.datePickerElement.disabled = false;\n  }\n\n  onCloseHandler(selectedDates) {\n    if (selectedDates[0].getTime() > Date.now()) {\n      this.userSelectedDate = selectedDates[0].getTime();\n      this.startButton.disabled = false;\n\n      this.renderTime(this.userSelectedDate);\n    } else {\n      this.startButton.disabled = true;\n      iziToast.error(this.iziToastErrorOptions);\n    }\n  }\n}\n\nconst timer = new Timer({\n  startButtonSelector: '[data-start]',\n  datePickerSelector: '#datetime-picker',\n  timeElementsSelectors: {\n    days: '[data-days]',\n    hours: '[data-hours]',\n    minutes: '[data-minutes]',\n    seconds: '[data-seconds]',\n  },\n});\n"],"names":["Timer","startButtonSelector","datePickerSelector","timeElementsSelectors","selectedDates","flatpickr","ms","timeData","timeDifference","convertedTimeDifference","key","selectedDate","iziToast"],"mappings":"+IAGA,MAAMA,CAAM,CACV,YAAY,CACV,oBAAAC,EACA,mBAAAC,EACA,sBAAAC,CACJ,EAAK,CACD,KAAK,YAAc,SAAS,cAAcF,CAAmB,EAC7D,KAAK,kBAAoB,SAAS,cAAcC,CAAkB,EAClE,KAAK,aAAe,CAClB,KAAM,SAAS,cAAcC,EAAsB,IAAI,EACvD,MAAO,SAAS,cAAcA,EAAsB,KAAK,EACzD,QAAS,SAAS,cAAcA,EAAsB,OAAO,EAC7D,QAAS,SAAS,cAAcA,EAAsB,OAAO,CACnE,EAEI,KAAK,iBAAmB,EACxB,KAAK,cAAgB,KAErB,KAAK,qBAAuB,CAC1B,MAAO,QACP,QAAS,sCACT,SAAU,WAChB,EAEI,KAAK,iBAAmB,CACtB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAASC,GAAiB,KAAK,eAAeA,CAAa,CACjE,EAEIC,EAAU,KAAK,kBAAmB,KAAK,gBAAgB,EACvD,KAAK,mBAAkB,CACxB,CAED,oBAAqB,CACnB,KAAK,YAAY,iBAAiB,QAAS,IACzC,KAAK,WAAW,KAAK,gBAAgB,CAC3C,CACG,CAED,UAAUC,EAAI,CAMZ,MAAO,CACL,KAAM,KAAK,MAAMA,EAAK,KAAG,EACzB,MAAO,KAAK,MAAOA,EAAK,MAAO,IAAI,EACnC,QAAS,KAAK,MAAQA,EAAK,MAAO,KAAQ,GAAM,EAChD,QAAS,KAAK,MAASA,EAAK,MAAO,KAAQ,IAAU,GAAM,CACjE,CACG,CAED,WAAWC,EAAU,CACnB,MAAMC,EAAiBD,EAAW,KAAK,IAAG,EACpCE,EAA0B,KAAK,UAAUD,CAAc,EAE7D,GAAIA,EAAiB,EACnB,UAAWE,KAAOD,EAChB,KAAK,aAAaC,CAAG,EAAE,UAAYD,EAAwBC,CAAG,EAC3D,SAAU,EACV,SAAS,EAAG,GAAG,OAGpB,KAAK,UAAS,CAEjB,CAED,WAAWC,EAAc,CACvB,KAAK,YAAY,SAAW,GAC5B,KAAK,kBAAkB,SAAW,GAElC,KAAK,cAAgB,YAAY,IAAM,CACrC,KAAK,WAAWA,CAAY,CAC7B,EAAE,GAAI,CACR,CAED,WAAY,CACN,KAAK,gBACP,cAAc,KAAK,aAAa,EAChC,KAAK,cAAgB,MAGvB,UAAWD,KAAO,KAAK,aACrB,KAAK,aAAaA,CAAG,EAAE,UAAY,KAGrC,KAAK,kBAAkB,SAAW,EACnC,CAED,eAAeN,EAAe,CACxBA,EAAc,CAAC,EAAE,QAAO,EAAK,KAAK,OACpC,KAAK,iBAAmBA,EAAc,CAAC,EAAE,QAAO,EAChD,KAAK,YAAY,SAAW,GAE5B,KAAK,WAAW,KAAK,gBAAgB,IAErC,KAAK,YAAY,SAAW,GAC5BQ,EAAS,MAAM,KAAK,oBAAoB,EAE3C,CACH,CAEc,IAAIZ,EAAM,CACtB,oBAAqB,eACrB,mBAAoB,mBACpB,sBAAuB,CACrB,KAAM,cACN,MAAO,eACP,QAAS,iBACT,QAAS,gBACV,CACH,CAAC"}